"sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2908954/"]
        },
        "melatonin": {
            "name": "Melatonin",
            "benefits": "Sleep regulation, antioxidant, immune modulation",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["sleep_issues", "jet_lag", "shift_work", "longevity"]
            },
            "dosage": {
                "20s": "0.5-3 mg before bed",
                "30s": "0.5-3 mg before bed",
                "40s": "0.5-3 mg before bed",
                "50s": "0.5-5 mg before bed",
                "60s": "0.5-5 mg before bed",
                "70plus": "0.5-5 mg before bed"
            },
            "contraindications": ["autoimmune_disorders", "seizure_disorders"],
            "interactions": ["blood_thinners", "immunosuppressants", "diabetes_medications", "contraceptives"],
            "sources": ["https://www.nccih.nih.gov/health/melatonin-what-you-need-to-know"]
        },
        "probiotics": {
            "name": "Probiotics",
            "benefits": "Gut health, immune function, digestion support",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["digestive_issues", "antibiotic_recovery", "immune_support", "longevity"]
            },
            "dosage": {
                "20s": "10-30 billion CFU daily",
                "30s": "10-30 billion CFU daily",
                "40s": "10-30 billion CFU daily",
                "50s": "10-30 billion CFU daily",
                "60s": "10-30 billion CFU daily",
                "70plus": "10-30 billion CFU daily"
            },
            "contraindications": ["severe_immunodeficiency"],
            "interactions": ["antibiotics", "immunosuppressants"],
            "sources": ["https://www.nccih.nih.gov/health/probiotics-what-you-need-to-know"]
        },
        "nmn": {
            "name": "Nicotinamide Mononucleotide (NMN)",
            "benefits": "NAD+ precursor, longevity support, energy metabolism, cellular repair",
            "recommended_for": {
                "age_groups": ["40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["longevity", "energy_levels", "cognitive_function", "heart_health"]
            },
            "dosage": {
                "40s": "250-500 mg daily",
                "50s": "250-750 mg daily",
                "60s": "250-1000 mg daily",
                "70plus": "250-1000 mg daily"
            },
            "contraindications": [],
            "interactions": ["medications_metabolized_by_liver"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7238909/"]
        },
        "astaxanthin": {
            "name": "Astaxanthin",
            "benefits": "Powerful antioxidant, skin health, eye health, anti-inflammatory",
            "recommended_for": {
                "age_groups": ["30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["skin_health", "eye_health", "joint_pain", "exercise_recovery", "longevity"]
            },
            "dosage": {
                "30s": "4-12 mg daily",
                "40s": "4-12 mg daily",
                "50s": "4-12 mg daily",
                "60s": "4-12 mg daily",
                "70plus": "4-12 mg daily"
            },
            "contraindications": [],
            "interactions": ["hormone_therapies", "medications_metabolized_by_liver"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5946307/"]
        },
        "collagen": {
            "name": "Collagen Peptides",
            "benefits": "Skin elasticity, joint health, bone strength, hair and nail support",
            "recommended_for": {
                "age_groups": ["30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["skin_health", "joint_pain", "bone_health", "hair_health", "nail_health"]
            },
            "dosage": {
                "30s": "5-10 g daily",
                "40s": "10-15 g daily",
                "50s": "10-20 g daily",
                "60s": "10-20 g daily",
                "70plus": "10-20 g daily"
            },
            "contraindications": ["alpha-gal_syndrome"],
            "interactions": [],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6835901/"]
        },
        "fiber": {
            "name": "Fiber Supplement",
            "benefits": "Digestive health, cholesterol management, blood sugar regulation",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["digestive_issues", "heart_health", "blood_sugar_management", "weight_management"]
            },
            "dosage": {
                "20s": "5-10 g per serving, 25-38 g total daily",
                "30s": "5-10 g per serving, 25-38 g total daily",
                "40s": "5-10 g per serving, 25-38 g total daily",
                "50s": "5-10 g per serving, 25-38 g total daily",
                "60s": "5-10 g per serving, 25-38 g total daily",
                "70plus": "5-10 g per serving, 25-38 g total daily"
            },
            "contraindications": ["intestinal_narrowing", "difficulty_swallowing"],
            "interactions": ["diabetes_medications", "certain_antibiotics", "cholesterol_medications"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3705355/"]
        },
        "spirulina": {
            "name": "Spirulina",
            "benefits": "Complete protein, antioxidants, immune support, detoxification",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["immune_support", "detoxification_support", "energy_levels", "inflammation"]
            },
            "dosage": {
                "20s": "3-5 g daily",
                "30s": "3-5 g daily",
                "40s": "3-5 g daily",
                "50s": "3-5 g daily",
                "60s": "3-5 g daily",
                "70plus": "3-5 g daily"
            },
            "contraindications": ["phenylketonuria", "autoimmune_conditions"],
            "interactions": ["immunosuppressants", "anticoagulants"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3136577/"]
        }
    }
    
    return supplements_data

def get_interactions_data():
    """Return the comprehensive interactions data for supplements"""
    
    interactions_data = {
        "calcium": ["iron", "zinc", "magnesium", "manganese"],
        "iron": ["calcium", "vitamin_e", "zinc", "green_tea"],
        "zinc": ["calcium", "iron", "copper", "folate"],
        "magnesium": ["calcium", "potassium", "vitamin_d"],
        "vitamin_c": ["vitamin_b12", "copper"],
        "vitamin_e": ["vitamin_k", "blood_thinners"],
        "curcumin": ["iron", "blood_thinners"],
        "quercetin": ["iron", "antibiotics", "blood_thinners"],
        "vitamin_a": ["vitamin_e", "vitamin_k", "blood_thinners"],
        "vitamin_k": ["vitamin_a", "blood_thinners", "vitamin_e"],
        "selenium": ["vitamin_c", "zinc", "nac"],
        "copper": ["zinc", "vitamin_c"],
        "resveratrol": ["blood_thinners", "nsaids"],
        "nac": ["nitrates", "blood_thinners"],
        "omega_3": ["blood_thinners", "vitamin_e", "ginkgo_biloba"],
        "probiotics": ["antibiotics", "immunosuppressants"],
        "berberine": ["diabetes_medications", "blood_thinners"],
        "coq10": ["blood_thinners", "blood_pressure_medications"],
        "vitamin_d": ["calcium", "magnesium", "corticosteroids"],
        "ashwagandha": ["thyroid_medications", "sedatives", "immunosuppressants"],
        "ginseng": ["stimulants", "blood_thinners", "diabetes_medications"],
        "rhodiola": ["stimulants", "antidepressants", "blood_pressure_medications"],
        "ginkgo_biloba": ["blood_thinners", "antidepressants", "seizure_medications"]
    }
    
    return interactions_data

def get_age_health_concerns():
    """Return age and gender-specific health concerns"""
    
    age_health_concerns = {
        "20s": {
            "male": ["immune_support", "fitness_performance", "stress", "energy_levels"],
            "female": ["immune_support", "iron_deficiency", "stress", "reproductive_health"],
            "prefer_not_to_say": ["immune_support", "stress", "fitness_performance", "energy_levels"]
        },
        "30s": {
            "male": ["energy_levels", "stress", "immune_support", "fitness_performance"],
            "female": ["energy_levels", "stress", "reproductive_health", "iron_deficiency"],
            "prefer_not_to_say": ["energy_levels", "stress", "immune_support", "fitness_performance"]
        },
        "40s": {
            "male": ["heart_health", "energy_levels", "stress", "longevity", "weight_management"],
            "female": ["energy_levels", "stress", "bone_health", "hormone_balance", "weight_management"],
            "prefer_not_to_say": ["energy_levels", "stress", "heart_health", "longevity", "weight_management"]
        },
        "50s": {
            "male": ["heart_health", "prostate_health", "joint_pain", "cognitive_function", "longevity"],
            "female": ["bone_health", "hormone_balance", "heart_health", "joint_pain", "longevity"],
            "prefer_not_to_say": ["heart_health", "joint_pain", "cognitive_function", "longevity", "bone_health"]
        },
        "60s": {
            "male": ["heart_health", "joint_pain", "cognitive_function", "prostate_health", "longevity"],
            "female": ["bone_health", "heart_health", "joint_pain", "cognitive_function", "longevity"],
            "prefer_not_to_say": ["heart_health", "joint_pain", "cognitive_function", "longevity", "bone_health"]
        },
        "70plus": {
            "male": ["heart_health", "cognitive_function", "bone_health", "immune_support", "longevity"],
            "female": ["bone_health", "heart_health", "cognitive_function", "immune_support", "longevity"],
            "prefer_not_to_say": ["heart_health", "cognitive_function", "bone_health", "immune_support", "longevity"]
        }
    }
    
    return age_health_concerns

# ======== UI FUNCTIONS ========

def load_data():
    """Load supplement data directly from the helper functions"""
    supplements_data = get_supplement_data()
    interactions_data = get_interactions_data()
    age_health_concerns = get_age_health_concerns()
    
    return supplements_data, interactions_data, age_health_concerns

def display_header():
    st.title("Personalized Vitamin & Supplement Advisor")
    st.markdown("""
    This application provides personalized supplement recommendations based on your age, gender, and health concerns.
    Recommendations include potential interactions and are based on sourced information.
    
    **Disclaimer:** This tool provides general information only and is not a substitute for professional medical advice.
    Always consult with a healthcare provider before starting any supplement regimen.
    """)

def get_user_info():
    col1, col2 = st.columns(2)
    
    with col1:
        age_group = st.selectbox(
            "Select your age group:",
            ["20s", "30s", "40s", "50s", "60s", "70plus"]
        )
        
    with col2:
        gender = st.selectbox(
            "Select your gender:",
            ["female", "male", "prefer_not_to_say"]
        )
    
    return age_group, gender

def get_health_concerns(all_supplements, age_health_concerns, age_group, gender):
    # Extract all possible health concerns from the supplement data
    all_health_concerns = set()
    for supplement in all_supplements.values():
        for concern in supplement["recommended_for"]["health_concerns"]:
            all_health_concerns.add(concern)
    
    # Convert to list and sort alphabetically
    all_health_concerns = sorted(list(all_health_concerns))
    
    # Get recommended concerns for this age group and gender
    recommended_concerns = age_health_concerns.get(age_group, {}).get(gender, [])
    
    # Create a readable mapping for display
    concern_mapping = {
        "bone_health": "Bone Health",
        "immune_support": "Immune System Support",
        "depression": "Mood Support/Depression",
        "muscle_cramps": "Muscle Cramps",
        "sleep_issues": "Sleep Issues",
        "stress": "Stress Management",
        "heart_health": "Heart Health",
        "joint_pain": "Joint Pain",
        "cognitive_function": "Cognitive Function/Brain Health",
        "fatigue": "Fatigue/Energy Levels",
        "vegetarian_vegan": "Vegetarian/Vegan Diet",
        "anemia": "Anemia/Low Iron",
        "digestive_issues": "Digestive Issues",
        "antibiotic_recovery": "Recovery from Antibiotics",
        "skin_health": "Skin Health",
        "iron_deficiency": "Iron Deficiency",
        "heavy_periods": "Heavy Menstrual Periods",
        "osteoporosis_risk": "Osteoporosis Risk",
        "fitness_performance": "Fitness Performance",
        "reproductive_health": "Reproductive Health",
        "hormone_balance": "Hormone Balance",
        "prostate_health": "Prostate Health",
        "statin_users": "Taking Statin Medications",
        "respiratory_issues": "Respiratory Issues",
        "liver_health": "Liver Health",
        "longevity": "Longevity/Anti-Aging",
        "eye_health": "Eye Health",
        "nerve_health": "Nerve Health",
        "adrenal_support": "Adrenal Support",
        "detoxification_support": "Detoxification Support",
        "hair_health": "Hair Health",
        "nail_health": "Nail Health",
        "wound_healing": "Wound Healing",
        "muscle_loss_prevention": "Muscle Loss Prevention",
        "antibiotic_recovery": "Recovery from Antibiotics",
        "blood_pressure": "Blood Pressure Management",
        "menopause_symptoms": "Menopause Symptoms",
        "circulation": "Circulation",
        "tinnitus": "Tinnitus",
        "migraine_prevention": "Migraine Prevention",
        "memory_support": "Memory Support",
        "weight_management": "Weight Management",
        "exercise_recovery": "Exercise Recovery",
        "allergies": "Allergies",
        "jet_lag": "Jet Lag",
        "shift_work": "Shift Work Support",
        "herpes_management": "Herpes Management", 
        "cholesterol_management": "Cholesterol Management",
        "pms_symptoms": "PMS Symptoms",
        "mood_support": "Mood Support",
        "energy_levels": "Energy Levels",
        "blood_sugar_management": "Blood Sugar Management",
        "thyroid_health": "Thyroid Health",
        "inflammation": "Inflammation",
        "antioxidant_support": "Antioxidant Support"
    }
    
    # Convert technical terms to readable format for display
    display_concerns = {concern: concern_mapping.get(concern, concern.replace("_", " ").title()) 
                       for concern in all_health_concerns}
    
    # Create two columns
    col1, col2 = st.columns(2)
    
    with col1:
        st.subheader("Common Health Concerns")
        # Show recommended concerns first with pre-selected checkboxes
        selected_concerns = []
        for concern in recommended_concerns:
            if concern in display_concerns:
                label = display_concerns[concern]
                if st.checkbox(label, value=False, key=f"rec_{concern}"):
                    selected_concerns.append(concern)
    
    with col2:
        st.subheader("Additional Health Concerns")
        # Show other concerns
        other_concerns = [c for c in all_health_concerns if c not in recommended_concerns]
        for concern in other_concerns:
            label = display_concerns[concern]
            if st.checkbox(label, value=False, key=f"other_{concern}"):
                selected_concerns.append(concern)
                
    # Input for medications
    st.subheader("Current Medications")
    medications = st.text_input("List any medications you are currently taking (separated by commas):")
    
    return selected_concerns, medications

def select_budget_tier():
    st.subheader("Budget Preference")
    tier = st.radio(
        "Select your budget tier:",
        ["essential", "good", "ideal"],
        index=1,  # Default to "good"
        format_func=lambda x: {
            "essential": "Essential (Most affordable options)",
            "good": "Good (Balanced quality and cost)",
            "ideal": "Ideal (Premium quality options)"
        }.get(x)
    )
    return tier

def get_recommended_supplements(supplements_data, age_group, gender, health_concerns):
    recommended = {}
    
    for supp_id, supplement in supplements_data.items():
        # Check if supplement is recommended for this age group and gender
        if (age_group in supplement["recommended_for"]["age_groups"] and
            gender in supplement["recommended_for"]["genders"]):
            
            # Check if any health concerns match
            matching_concerns = [concern for concern in health_concerns 
                                if concern in supplement["recommended_for"]["health_concerns"]]
            
            if matching_concerns:
                # Calculate a relevance score based on how many concerns match
                relevance = len(matching_concerns) / len(health_concerns) if health_concerns else 0
                recommended[supp_id] = {
                    "supplement": supplement,
                    "matching_concerns": matching_concerns,
                    "relevance": relevance
                }
    
    # Sort by relevance score
    sorted_recommendations = dict(sorted(recommended.items(), 
                                 key=lambda x: x[1]["relevance"], 
                                 reverse=True))
    
    return sorted_recommendations

def check_interactions(recommendations, interactions_data, medications):
    """Check for potential interactions between recommended supplements and with medications."""
    
    potential_interactions = {}
    
    # Check supplement-to-supplement interactions
    supplement_ids = list(recommendations.keys())
    
    for i, supp_id in enumerate(supplement_ids):
        interactions = []
        
        # Check against interactions data
        if supp_id in interactions_data:
            for interacting_supp in interactions_data[supp_id]:
                if interacting_supp in supplement_ids:
                    interactions.append({
                        "type": "supplement",
                        "name": recommendations[interacting_supp]["supplement"]["name"],
                        "note": "May reduce absorption when taken together. Take at least 2 hours apart."
                    })
        
        # Check against medication interactions
        if medications:
            med_list = [med.strip().lower() for med in medications.split(",")]
            supp_data = recommendations[supp_id]["supplement"]
            
            for med in med_list:
                for interaction in supp_data.get("interactions", []):
                    # Simple keyword matching (in a real app, would use a more sophisticated approach)
                    if med in interaction or interaction in med:
                        interactions.append({
                            "type": "medication",
                            "name": med,
                            "note": f"Potential interaction with {med}. Consult healthcare provider."
                        })
        
        if interactions:
            potential_interactions[supp_id] = interactions
    
    return potential_interactions

def display_recommendations(recommendations, interactions, age_group):
    st.header("Your Personalized Supplement Recommendations")
    
    if not recommendations:
        st.warning("No specific supplements recommended based on your selections.")
        return
    
    # Create expandable sections for each recommendation
    for supp_id, rec_data in recommendations.items():
        supplement = rec_data["supplement"]
        matching_concerns = rec_data["matching_concerns"]
        
        # Format concerns for display
        concern_display = [c.replace("_", " ").title() for c in matching_concerns]
        
        with st.expander(f"**{supplement['name']}**"):
            # Main information
            st.markdown(f"**Benefits**: {supplement['benefits']}")
            st.markdown(f"**Recommended for**: {', '.join(concern_display)}")
            st.markdown(f"**Suggested dosage**: {supplement['dosage'].get(age_group, 'Not specified')}")
            
            # Interaction warnings
            if supp_id in interactions:
                st.markdown("### ⚠️ Potential Interactions")
                for interaction in interactions[supp_id]:
                    st.markdown(f"- **{interaction['name']}**: {interaction['note']}")
            
            # Contraindications
            if supplement.get("contraindications"):
                contraindications = [c.replace("_", " ").title() for c in supplement.get("contraindications", [])]
                st.markdown(f"**Use caution if you have**: {', '.join(contraindications)}")
            
            # Sources
            st.markdown("### Sources")
            for source in supplement.get("sources", []):
                st.markdown(f"- [{source}]({source})")

def display_timing_guide(recommendations):
    st.header("Supplement Timing Guide")
    
    if not recommendations:
        return
    
    # Create general timing categories
    timing_categories = {
        "morning_with_food": [],
        "morning_empty_stomach": [],
        "afternoon": [],
        "evening_with_food": [],
        "evening_empty_stomach": [],
        "bedtime": []
    }
    
    # Simple rules for categorizing supplements
    for supp_id, rec_data in recommendations.items():
        supplement = rec_data["supplement"]
        name = supplement["name"]
        
        if name in ["Iron"]:
            timing_categories["morning_empty_stomach"].append(name)
        elif name in ["Vitamin D", "Vitamin B12", "Omega-3 Fatty Acids", "Coenzyme Q10 (CoQ10)", "Vitamin A", "Vitamin E"]:
            timing_categories["morning_with_food"].append(name)
        elif name in ["Probiotics"]:
            timing_categories["morning_empty_stomach"].append(name)
        elif name in ["Vitamin C", "Choline", "Taurine", "Berberine"]:
            timing_categories["afternoon"].append(name)
        elif name in ["Calcium", "Curcumin (Turmeric Extract)"]:
            timing_categories["evening_with_food"].append(name)
        elif name in ["Magnesium", "Ashwagandha", "Glycine", "Melatonin"]:
            timing_categories["bedtime"].append(name)
        elif name in ["Vitamin K", "Zinc", "Quercetin", "Creatine", "Resveratrol", "CoQ10", "PQQ", "NMN"]:
            timing_categories["morning_with_food"].append(name)
        else:
            # Default to morning with food if no specific rule
            timing_categories["morning_with_food"].append(name)
    
    # Display timing recommendations
    col1, col2 = st.columns(2)
    
    with col1:
        st.subheader("Morning")
        if timing_categories["morning_empty_stomach"]:
            st.markdown("**On empty stomach:**")
            for supp in timing_categories["morning_empty_stomach"]:
                st.markdown(f"- {supp}")
        
        if timing_categories["morning_with_food"]:
            st.markdown("**With breakfast:**")
            for supp in timing_categories["morning_with_food"]:
                st.markdown(f"- {supp}")
        
        st.subheader("Afternoon")
        if timing_categories["afternoon"]:
            for supp in timing_categories["afternoon"]:
                st.markdown(f"- {supp}")
    
    with col2:
        st.subheader("Evening")
        if timing_categories["evening_with_food"]:
            st.markdown("**With dinner:**")
            for supp in timing_categories["evening_with_food"]:
                st.markdown(f"- {supp}")
        
        if timing_categories["evening_empty_stomach"]:
            st.markdown("**After dinner (2+ hours):**")
            for supp in timing_categories["evening_empty_stomach"]:
                st.markdown(f"- {supp}")
        
        st.subheader("Bedtime")
        if timing_categories["bedtime"]:
            for supp in timing_categories["bedtime"]:
                st.markdown(f"- {supp}")
    
    # General timing advice
    st.markdown("""
    ### General Timing Tips:
    1. **Fat-soluble vitamins** (A, D, E, K) are best absorbed with fatty meals
    2. **Iron** absorbs better on an empty stomach, but can cause stomach upset (take with vitamin C to enhance absorption)
    3. **B vitamins** may boost energy, so taking them late in the day might affect sleep
    4. **Calcium and magnesium** can compete for absorption, so take at different times
    5. **Probiotics** are often best taken in the morning on an empty stomach
    6. **Adaptogens** like Ashwagandha may support sleep when taken in the evening
    7. **Berberine** should be taken before meals for blood sugar support
    """)

def create_supplement_plan(recommendations, interactions, age_group):
    st.header("Your Personalized Supplement Plan")
    
    if not recommendations:
        st.warning("No specific supplements recommended based on your selections.")
        return
    
    # Create formatted plan
    plan_text = "# Your Personalized Supplement Plan\n\n"
    
    for supp_id, rec_data in recommendations.items():
        supplement = rec_data["supplement"]
        
        plan_text += f"### {supplement['name']}\n"
        plan_text += f"- **Dosage:** {supplement['dosage'].get(age_group, 'Consult healthcare provider')}\n"
        
        if supp_id in interactions and interactions[supp_id]:
            plan_text += "- **Special Considerations:**\n"
            for interaction in interactions[supp_id]:
                plan_text += f"  - *{interaction['name']}*: {interaction['note']}\n"
        
        plan_text += "\n"
    
    # Add general advice
    plan_text += """## General Recommendations

1. **Start gradually**: Introduce one supplement at a time to monitor for any adverse reactions.
2. **Consistency matters**: Take supplements consistently at the same time(s) each day.
3. **Follow timing guidelines**: Some supplements are better absorbed at specific times or with/without food.
4. **Regular reassessment**: Reassess your supplement needs every 6-12 months or with any significant health changes.
5. **Quality matters**: Look for supplements that have been third-party tested (USP, NSF, or ConsumerLab verification).

## Important Disclaimer
This supplement plan is provided for informational purposes only and is not a substitute for professional medical advice. Always consult with a healthcare provider before starting any supplement regimen, especially if you have health conditions or take medications.
"""
    
    # Display the plan and offer download
    st.markdown(plan_text)
    
    # In a real app, you would generate a PDF here
    st.download_button(
        label="Download Supplement Plan (PDF)",
        data=plan_text,
        file_name="personalized_supplement_plan.txt",
        mime="text/plain"
    )

# ======== MAIN APPLICATION ========

def main():
    # Load data
    supplements_data, interactions_data, age_health_concerns = load_data()
    
    # Display header and get user information
    display_header()
    age_group, gender = get_user_info()
    
    # Get health concerns based on age and gender
    health_concerns, medications = get_health_concerns(supplements_data, age_health_concerns, age_group, gender)
    
    # Generate recommendations button
    if st.button("Generate Recommendations"):
        if not health_concerns:
            st.warning("Please select at least one health concern for personalized recommendations.")
        else:
            # Get recommendations based on user input
            recommendations = get_recommended_supplements(supplements_data, age_group, gender, health_concerns)
            
            # Check for potential interactions
            interactions = check_interactions(recommendations, interactions_data, medications)
            
            # Display recommendations
            display_recommendations(recommendations, interactions, age_group)
            
            # Display timing guide
            display_timing_guide(recommendations)
            
            # Create and offer downloadable plan
            create_supplement_plan(recommendations, interactions, age_group)
    
    # Footer
    st.markdown("---")
    st.markdown("""
    **Disclaimer:** This application provides general information and is not a substitute for professional medical advice. 
    All recommendations should be reviewed with a healthcare provider before implementation.
    """)

if __name__ == "__main__":
    main()
                "20s": "500-1000 mg daily",
                "30s": "500-1000 mg daily",
                "40s": "500-1000 mg daily",
                "50s": "500-1000 mg daily",
                "60s": "500-1000 mg daily",
                "70plus": "500-1000 mg daily"
            },
            "contraindications": ["seizure_disorders"],
            "interactions": ["blood_thinners", "anti_inflammatory_drugs"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3257651/"]
        },
        "phosphatidylserine": {
            "name": "Phosphatidylserine",
            "benefits": "Cognitive function, memory, stress reduction, brain health",
            "recommended_for": {
                "age_groups": ["40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["cognitive_function", "memory_support", "stress", "exercise_recovery"]
            },
            "dosage": {
                "40s": "100-300 mg daily",
                "50s": "100-300 mg daily",
                "60s": "100-300 mg daily",
                "70plus": "100-300 mg daily"
            },
            "contraindications": [],
            "interactions": ["blood_thinners", "cognitive_medications"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4596514/"]
        },
        "krill_oil": {
            "name": "Krill Oil",
            "benefits": "Omega-3 source, antioxidant, joint health, brain function",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["heart_health", "joint_pain", "cognitive_function", "inflammation"]
            },
            "dosage": {
                "20s": "500-1500 mg daily",
                "30s": "500-1500 mg daily",
                "40s": "500-1500 mg daily",
                "50s": "500-1500 mg daily",
                "60s": "500-1500 mg daily",
                "70plus": "500-1500 mg daily"
            },
            "contraindications": ["shellfish_allergy", "bleeding_disorders"],
            "interactions": ["blood_thinners", "NSAIDs"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4267453/"]
        },
        
        # Amino Acids & Protein-derived
        "taurine": {
            "name": "Taurine",
            "benefits": "Heart health, exercise performance, antioxidant, cognitive function",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["heart_health", "fitness_performance", "cognitive_function", "longevity"]
            },
            "dosage": {
                "20s": "500-2000 mg daily",
                "30s": "500-2000 mg daily",
                "40s": "500-3000 mg daily",
                "50s": "500-3000 mg daily",
                "60s": "500-3000 mg daily",
                "70plus": "500-3000 mg daily"
            },
            "contraindications": [],
            "interactions": ["lithium", "diuretics"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5933890/"]
        },
        "choline": {
            "name": "Choline",
            "benefits": "Brain health, liver function, metabolism, nervous system support",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["cognitive_function", "liver_health", "fitness_performance"]
            },
            "dosage": {
                "20s": "425-550 mg daily",
                "30s": "425-550 mg daily",
                "40s": "425-550 mg daily",
                "50s": "425-550 mg daily",
                "60s": "425-550 mg daily",
                "70plus": "425-550 mg daily"
            },
            "contraindications": ["trimethylaminuria"],
            "interactions": [],
            "sources": ["https://ods.od.nih.gov/factsheets/Choline-HealthProfessional/"]
        },
        "l_carnitine": {
            "name": "L-Carnitine",
            "benefits": "Energy production, fat metabolism, exercise recovery, heart health",
            "recommended_for": {
                "age_groups": ["30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["heart_health", "fitness_performance", "fatigue", "weight_management"]
            },
            "dosage": {
                "30s": "500-2000 mg daily",
                "40s": "500-2000 mg daily",
                "50s": "500-2000 mg daily",
                "60s": "1000-3000 mg daily",
                "70plus": "1000-3000 mg daily"
            },
            "contraindications": ["hypothyroidism"],
            "interactions": ["thyroid_medications", "blood_thinners", "seizure_medications"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5872767/"]
        },
        "glycine": {
            "name": "Glycine",
            "benefits": "Sleep quality, collagen formation, detoxification, cognitive function",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["sleep_issues", "joint_health", "detoxification_support", "stress"]
            },
            "dosage": {
                "20s": "2-3 g daily",
                "30s": "2-3 g daily",
                "40s": "2-3 g daily",
                "50s": "2-3 g daily",
                "60s": "2-3 g daily",
                "70plus": "2-3 g daily"
            },
            "contraindications": [],
            "interactions": ["antipsychotic_medications", "clozapine"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5350494/"]
        },
        "creatine": {
            "name": "Creatine",
            "benefits": "Muscle strength, exercise performance, cognitive function, energy production",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["fitness_performance", "cognitive_function", "muscle_loss_prevention", "energy_levels"]
            },
            "dosage": {
                "20s": "3-5 g daily",
                "30s": "3-5 g daily",
                "40s": "3-5 g daily",
                "50s": "3-5 g daily",
                "60s": "3-5 g daily",
                "70plus": "3-5 g daily"
            },
            "contraindications": ["kidney_disease"],
            "interactions": ["nephrotoxic_medications", "caffeine", "diabetes_medications"],
            "sources": ["https://pubmed.ncbi.nlm.nih.gov/14561278/"]
        },
        "glutamine": {
            "name": "Glutamine",
            "benefits": "Gut health, immune function, muscle recovery, wound healing",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["digestive_issues", "immune_support", "fitness_performance", "wound_healing"]
            },
            "dosage": {
                "20s": "5-10 g daily",
                "30s": "5-10 g daily",
                "40s": "5-10 g daily",
                "50s": "5-10 g daily",
                "60s": "5-10 g daily",
                "70plus": "5-10 g daily"
            },
            "contraindications": ["liver_disease", "reye_syndrome"],
            "interactions": ["anti_seizure_medications", "chemotherapy"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6266414/"]
        },
        "leucine": {
            "name": "Leucine",
            "benefits": "Muscle protein synthesis, recovery, metabolism regulation",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["fitness_performance", "muscle_loss_prevention", "weight_management"]
            },
            "dosage": {
                "20s": "2-5 g daily",
                "30s": "2-5 g daily",
                "40s": "2-5 g daily",
                "50s": "3-5 g daily",
                "60s": "3-5 g daily",
                "70plus": "3-5 g daily"
            },
            "contraindications": ["ALS", "maple_syrup_urine_disease"],
            "interactions": [],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6212987/"]
        },
        "NAC": {
            "name": "N-Acetyl Cysteine (NAC)",
            "benefits": "Antioxidant, liver support, respiratory health, glutathione production",
            "recommended_for": {
                "age_groups": ["30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["longevity", "respiratory_issues", "liver_health", "detoxification_support"]
            },
            "dosage": {
                "30s": "600-1200 mg daily",
                "40s": "600-1200 mg daily",
                "50s": "600-1200 mg daily",
                "60s": "600-1200 mg daily",
                "70plus": "600-1200 mg daily"
            },
            "contraindications": ["asthma (may worsen in some cases)"],
            "interactions": ["nitroglycerin", "certain_blood_pressure_medications", "chemotherapy"],
            "sources": ["https://www.mayoclinic.org/drugs-supplements-n-acetyl-cysteine/art-20360711"]
        },
        "arginine": {
            "name": "L-Arginine",
            "benefits": "Nitric oxide production, blood flow, exercise performance, wound healing",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["heart_health", "fitness_performance", "blood_pressure", "wound_healing"]
            },
            "dosage": {
                "20s": "2-6 g daily",
                "30s": "2-6 g daily",
                "40s": "2-6 g daily",
                "50s": "2-6 g daily",
                "60s": "2-6 g daily",
                "70plus": "2-6 g daily"
            },
            "contraindications": ["herpes", "heart_attack_recovery"],
            "interactions": ["blood_pressure_medications", "erectile_dysfunction_medications", "anticoagulants"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4595612/"]
        },
        "lysine": {
            "name": "L-Lysine",
            "benefits": "Collagen formation, calcium absorption, herpes management, immune function",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["herpes_management", "bone_health", "immune_support", "wound_healing"]
            },
            "dosage": {
                "20s": "1-3 g daily",
                "30s": "1-3 g daily",
                "40s": "1-3 g daily",
                "50s": "1-3 g daily",
                "60s": "1-3 g daily",
                "70plus": "1-3 g daily"
            },
            "contraindications": ["high_protein_diets"],
            "interactions": ["calcium_supplements", "aminoglycoside_antibiotics"],
            "sources": ["https://pubmed.ncbi.nlm.nih.gov/6435961/"]
        },
        
        # Plant-derived & Herbal
        "ashwagandha": {
            "name": "Ashwagandha",
            "benefits": "Stress reduction, anxiety relief, hormone balance, inflammation reduction",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["stress", "sleep_issues", "hormone_balance"]
            },
            "dosage": {
                "20s": "300-600 mg daily",
                "30s": "300-600 mg daily",
                "40s": "300-600 mg daily",
                "50s": "300-600 mg daily",
                "60s": "300-600 mg daily",
                "70plus": "300-600 mg daily"
            },
            "contraindications": ["autoimmune_disorders", "pregnancy"],
            "interactions": ["sedatives", "thyroid_medication", "immunosuppressants"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6979308/"]
        },
        "curcumin": {
            "name": "Curcumin (Turmeric Extract)",
            "benefits": "Anti-inflammatory, antioxidant, joint health, cognitive support",
            "recommended_for": {
                "age_groups": ["30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["joint_pain", "inflammation", "cognitive_function", "longevity"]
            },
            "dosage": {
                "30s": "500-1000 mg daily",
                "40s": "500-1000 mg daily",
                "50s": "500-1500 mg daily",
                "60s": "500-1500 mg daily",
                "70plus": "500-1500 mg daily"
            },
            "contraindications": ["gallbladder_disease", "bleeding_disorders"],
            "interactions": ["blood_thinners", "diabetes_medication"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5664031/"]
        },
        "quercetin": {
            "name": "Quercetin",
            "benefits": "Anti-inflammatory, antioxidant, immune support, anti-allergy",
            "recommended_for": {
                "age_groups": ["30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["immune_support", "allergies", "inflammation", "longevity"]
            },
            "dosage": {
                "30s": "500-1000 mg daily",
                "40s": "500-1000 mg daily",
                "50s": "500-1000 mg daily",
                "60s": "500-1000 mg daily",
                "70plus": "500-1000 mg daily"
            },
            "contraindications": [],
            "interactions": ["blood_thinners", "antibiotics", "cyclosporine"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5214562/"]
        },
        "resveratrol": {
            "name": "Resveratrol",
            "benefits": "Antioxidant, anti-aging, cardiovascular support",
            "recommended_for": {
                "age_groups": ["40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["longevity", "heart_health", "inflammation", "blood_sugar_management"]
            },
            "dosage": {
                "40s": "100-500 mg daily",
                "50s": "100-500 mg daily",
                "60s": "100-500 mg daily",
                "70plus": "100-500 mg daily"
            },
            "contraindications": [],
            "interactions": ["blood_thinners", "certain_medications_metabolized_by_liver", "estrogen_therapies"],
            "sources": ["https://www.nccih.nih.gov/health/resveratrol"]
        },
        "berberine": {
            "name": "Berberine",
            "benefits": "Blood sugar control, cholesterol management, gut health",
            "recommended_for": {
                "age_groups": ["40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["blood_sugar_management", "heart_health", "digestive_issues", "longevity"]
            },
            "dosage": {
                "40s": "500-1500 mg daily (divided doses)",
                "50s": "500-1500 mg daily (divided doses)",
                "60s": "500-1500 mg daily (divided doses)",
                "70plus": "500-1500 mg daily (divided doses)"
            },
            "contraindications": ["pregnancy", "jaundice"],
            "interactions": ["diabetes_medications", "blood_thinners", "certain_antibiotics", "statins"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6111450/"]
        },
        "ginseng": {
            "name": "Ginseng",
            "benefits": "Energy, cognitive function, immune support, stress adaptation",
            "recommended_for": {
                "age_groups": ["30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["fatigue", "cognitive_function", "immune_support", "stress"]
            },
            "dosage": {
                "30s": "200-400 mg daily",
                "40s": "200-400 mg daily",
                "50s": "200-400 mg daily",
                "60s": "200-400 mg daily",
                "70plus": "200-400 mg daily"
            },
            "contraindications": ["autoimmune_diseases", "bleeding_disorders", "hormone_sensitive_conditions"],
            "interactions": ["stimulants", "blood_thinners", "diabetes_medications", "immune_suppressants"],
            "sources": ["https://www.nccih.nih.gov/health/asian-ginseng"]
        },
        "rhodiola": {
            "name": "Rhodiola Rosea",
            "benefits": "Stress adaptation, fatigue reduction, cognitive performance, mood support",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["stress", "fatigue", "cognitive_function", "mood_support"]
            },
            "dosage": {
                "20s": "200-600 mg daily",
                "30s": "200-600 mg daily",
                "40s": "200-600 mg daily",
                "50s": "200-600 mg daily",
                "60s": "200-600 mg daily",
                "70plus": "200-600 mg daily"
            },
            "contraindications": ["bipolar_disorder"],
            "interactions": ["blood_pressure_medications", "stimulants", "antidepressants"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6208354/"]
        },
        "milk_thistle": {
            "name": "Milk Thistle",
            "benefits": "Liver support, detoxification, antioxidant protection",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["liver_health", "detoxification_support", "skin_health"]
            },
            "dosage": {
                "20s": "140-800 mg daily",
                "30s": "140-800 mg daily",
                "40s": "140-800 mg daily",
                "50s": "140-800 mg daily",
                "60s": "140-800 mg daily",
                "70plus": "140-800 mg daily"
            },
            "contraindications": ["ragweed_allergy"],
            "interactions": ["diabetes_medications", "hepatic_cytochrome_P450_substrates"],
            "sources": ["https://www.nccih.nih.gov/health/milk-thistle"]
        },
        "ginkgo_biloba": {
            "name": "Ginkgo Biloba",
            "benefits": "Cognitive function, blood flow, antioxidant, memory support",
            "recommended_for": {
                "age_groups": ["40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["cognitive_function", "memory_support", "circulation", "tinnitus"]
            },
            "dosage": {
                "40s": "120-240 mg daily",
                "50s": "120-240 mg daily",
                "60s": "120-240 mg daily",
                "70plus": "120-240 mg daily"
            },
            "contraindications": ["bleeding_disorders", "scheduled_surgery"],
            "interactions": ["blood_thinners", "antidepressants", "seizure_medications", "diabetes_drugs"],
            "sources": ["https://www.nccih.nih.gov/health/ginkgo"]
        },
        "bacopa": {
            "name": "Bacopa Monnieri",
            "benefits": "Cognitive enhancement, memory, stress reduction, neuroprotection",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["cognitive_function", "memory_support", "stress", "longevity"]
            },
            "dosage": {
                "20s": "300-600 mg daily",
                "30s": "300-600 mg daily",
                "40s": "300-600 mg daily",
                "50s": "300-600 mg daily",
                "60s": "300-600 mg daily",
                "70plus": "300-600 mg daily"
            },
            "contraindications": ["pregnancy", "slow_heart_rate"],
            "interactions": ["thyroid_medications", "calcium_channel_blockers", "sedatives"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3746283/"]
        },
        "lions_mane": {
            "name": "Lion's Mane Mushroom",
            "benefits": "Nerve growth factor support, cognitive function, mood, immune support",
            "recommended_for": {
                "age_groups": ["30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["cognitive_function", "nerve_health", "mood_support", "immune_support"]
            },
            "dosage": {
                "30s": "500-3000 mg daily",
                "40s": "500-3000 mg daily",
                "50s": "500-3000 mg daily",
                "60s": "500-3000 mg daily",
                "70plus": "500-3000 mg daily"
            },
            "contraindications": ["mushroom_allergies"],
            "interactions": ["blood_thinners", "diabetes_medications"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6982118/"]
        },
        "maca": {
            "name": "Maca Root",
            "benefits": "Energy, libido, hormone balance, endurance",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["energy_levels", "hormone_balance", "reproductive_health", "menopause_symptoms"]
            },
            "dosage": {
                "20s": "1500-3000 mg daily",
                "30s": "1500-3000 mg daily",
                "40s": "1500-3000 mg daily",
                "50s": "1500-3000 mg daily",
                "60s": "1500-3000 mg daily",
                "70plus": "1500-3000 mg daily"
            },
            "contraindications": ["thyroid_conditions"],
            "interactions": ["hormone_therapy", "blood_pressure_medications"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4411442/"]
        },
        
        # Specialty & Support
        "coq10": {
            "name": "Coenzyme Q10 (CoQ10)",
            "benefits": "Cellular energy production, antioxidant, heart health, anti-aging",
            "recommended_for": {
                "age_groups": ["40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["heart_health", "fatigue", "statin_users", "longevity", "migraine_prevention"]
            },
            "dosage": {
                "40s": "100-200 mg daily",
                "50s": "100-200 mg daily",
                "60s": "100-300 mg daily",
                "70plus": "100-300 mg daily"
            },
            "contraindications": [],
            "interactions": ["blood_thinners", "insulin", "chemotherapy"],
            "sources": ["https://www.mayoclinic.org/drugs-supplements-coenzyme-q10/art-20362602"]
        },
        "alpha_lipoic_acid": {
            "name": "Alpha Lipoic Acid (ALA)",
            "benefits": "Antioxidant, glucose metabolism, nerve health, liver support",
            "recommended_for": {
                "age_groups": ["30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["nerve_health", "blood_sugar_management", "liver_health", "longevity"]
            },
            "dosage": {
                "30s": "300-600 mg daily",
                "40s": "300-600 mg daily",
                "50s": "300-600 mg daily",
                "60s": "300-600 mg daily",
                "70plus": "300-600 mg daily"
            },
            "contraindications": ["thiamine_deficiency"],
            "interactions": ["diabetes_medications", "chemotherapy", "thyroid_medications"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6723188/"]
        },
        "dhea": {
            "name": "DHEA",
            "benefits": "Hormone precursor, adrenal support, anti-aging, immune function",
            "recommended_for": {
                "age_groups": ["50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["hormone_balance", "bone_health", "adrenal_support", "longevity"]
            },
            "dosage": {
                "50s": "25-50 mg daily",
                "60s": "25-50 mg daily",
                "70plus": "25-50 mg daily"
            },
            "contraindications": ["hormone_sensitive_cancers", "liver_disease", "PCOS"],
            "interactions": ["hormone_therapies", "anticoagulants", "insulin"],
            "sources": ["https://www.mayoclinic.org/drugs-supplements-dhea/art-20364199"]
        },
        "pqq": {
            "name": "Pyrroloquinoline Quinone (PQQ)",
            "benefits": "Mitochondrial biogenesis, neuroprotection, antioxidant, energy production",
            "recommended_for": {
                "age_groups": ["40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["heart_health", "cognitive_function", "energy_levels", "longevity"]
            },
            "dosage": {
                "40s": "10-20 mg daily",
                "50s": "10-20 mg daily",
                "60s": "10-20 mg daily",
                "70plus": "10-20 mg daily"
            },
            "contraindications": [],
            "interactions": ["blood_thinners", "certain_medications_metabolized_by_liver"],
            "sources": ["https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2908954import streamlit as st
import pandas as pd

# ======== DATA FUNCTIONS ========

def get_supplement_data():
    """Return the comprehensive supplement database with 60+ entries"""
    
    supplements_data = {
        # Essential Vitamins
        "vitamin_a": {
            "name": "Vitamin A",
            "benefits": "Vision health, immune function, skin health, cell growth",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["eye_health", "immune_support", "skin_health"]
            },
            "dosage": {
                "20s": "700-900 mcg RAE daily",
                "30s": "700-900 mcg RAE daily",
                "40s": "700-900 mcg RAE daily",
                "50s": "700-900 mcg RAE daily",
                "60s": "700-900 mcg RAE daily",
                "70plus": "700-900 mcg RAE daily"
            },
            "contraindications": ["pregnancy", "liver_disease"],
            "interactions": ["retinoid_medications", "certain_cholesterol_drugs"],
            "sources": ["https://ods.od.nih.gov/factsheets/VitaminA-HealthProfessional/"]
        },
        "vitamin_b1": {
            "name": "Vitamin B1 (Thiamine)",
            "benefits": "Energy metabolism, nerve function, cognitive health",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["fatigue", "cognitive_function", "alcoholism_recovery", "nerve_health"]
            },
            "dosage": {
                "20s": "1.1-1.2 mg daily",
                "30s": "1.1-1.2 mg daily",
                "40s": "1.1-1.2 mg daily",
                "50s": "1.1-1.2 mg daily",
                "60s": "1.1-1.2 mg daily",
                "70plus": "1.1-1.2 mg daily"
            },
            "contraindications": [],
            "interactions": ["certain_diuretics"],
            "sources": ["https://ods.od.nih.gov/factsheets/Thiamin-HealthProfessional/"]
        },
        "vitamin_b2": {
            "name": "Vitamin B2 (Riboflavin)",
            "benefits": "Energy production, antioxidant function, migraines, vision",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["migraines", "fatigue", "eye_health"]
            },
            "dosage": {
                "20s": "1.1-1.3 mg daily",
                "30s": "1.1-1.3 mg daily",
                "40s": "1.1-1.3 mg daily",
                "50s": "1.1-1.3 mg daily",
                "60s": "1.1-1.3 mg daily",
                "70plus": "1.1-1.3 mg daily"
            },
            "contraindications": [],
            "interactions": ["certain_antibiotics", "phenobarbital"],
            "sources": ["https://ods.od.nih.gov/factsheets/Riboflavin-HealthProfessional/"]
        },
        "vitamin_b3": {
            "name": "Vitamin B3 (Niacin)",
            "benefits": "Energy metabolism, cholesterol management, skin health, brain function",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["heart_health", "cholesterol_management", "skin_health", "cognitive_function"]
            },
            "dosage": {
                "20s": "14-16 mg daily",
                "30s": "14-16 mg daily",
                "40s": "14-16 mg daily",
                "50s": "14-16 mg daily",
                "60s": "14-16 mg daily",
                "70plus": "14-16 mg daily"
            },
            "contraindications": ["liver_disease", "peptic_ulcer", "severe_hypertension"],
            "interactions": ["statins", "diabetes_medications", "blood_pressure_medications"],
            "sources": ["https://ods.od.nih.gov/factsheets/Niacin-HealthProfessional/"]
        },
        "vitamin_b5": {
            "name": "Vitamin B5 (Pantothenic Acid)",
            "benefits": "Energy metabolism, stress hormone production, cholesterol synthesis, skin health",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["skin_health", "stress", "adrenal_support", "wound_healing"]
            },
            "dosage": {
                "20s": "5 mg daily",
                "30s": "5 mg daily",
                "40s": "5 mg daily",
                "50s": "5 mg daily",
                "60s": "5 mg daily",
                "70plus": "5 mg daily"
            },
            "contraindications": [],
            "interactions": ["certain_antibiotics"],
            "sources": ["https://ods.od.nih.gov/factsheets/PantothenicAcid-HealthProfessional/"]
        },
        "vitamin_b6": {
            "name": "Vitamin B6 (Pyridoxine)",
            "benefits": "Amino acid metabolism, red blood cell formation, neurotransmitter synthesis, hormone regulation",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["hormone_balance", "mood_support", "heart_health", "immune_support", "pms_symptoms"]
            },
            "dosage": {
                "20s": "1.3-1.7 mg daily",
                "30s": "1.3-1.7 mg daily",
                "40s": "1.3-1.7 mg daily",
                "50s": "1.5-1.7 mg daily",
                "60s": "1.5-1.7 mg daily",
                "70plus": "1.5-1.7 mg daily"
            },
            "contraindications": ["high_doses_long_term_can_cause_neuropathy"],
            "interactions": ["certain_antibiotics", "anti_seizure_medications", "theophylline"],
            "sources": ["https://ods.od.nih.gov/factsheets/VitaminB6-HealthProfessional/"]
        },
        "vitamin_b7": {
            "name": "Vitamin B7 (Biotin)",
            "benefits": "Hair, skin and nail health, energy metabolism, blood sugar regulation",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["hair_health", "skin_health", "nail_health", "blood_sugar_management"]
            },
            "dosage": {
                "20s": "30 mcg daily",
                "30s": "30 mcg daily",
                "40s": "30 mcg daily",
                "50s": "30 mcg daily",
                "60s": "30 mcg daily",
                "70plus": "30 mcg daily"
            },
            "contraindications": [],
            "interactions": ["can_interfere_with_lab_tests"],
            "sources": ["https://ods.od.nih.gov/factsheets/Biotin-HealthProfessional/"]
        },
        "vitamin_b9": {
            "name": "Vitamin B9 (Folate)",
            "benefits": "Cell division, DNA synthesis, amino acid metabolism, red blood cell formation",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["reproductive_health", "heart_health", "cognitive_function", "mood_support"]
            },
            "dosage": {
                "20s": "400 mcg daily",
                "30s": "400 mcg daily",
                "40s": "400 mcg daily",
                "50s": "400 mcg daily",
                "60s": "400 mcg daily",
                "70plus": "400 mcg daily"
            },
            "contraindications": ["may_mask_b12_deficiency"],
            "interactions": ["methotrexate", "certain_anti_seizure_medications"],
            "sources": ["https://ods.od.nih.gov/factsheets/Folate-HealthProfessional/"]
        },
        "vitamin_b12": {
            "name": "Vitamin B12 (Cobalamin)",
            "benefits": "Nerve function, red blood cell formation, DNA synthesis, energy metabolism",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["fatigue", "vegetarian_vegan", "anemia", "cognitive_function", "nerve_health"]
            },
            "dosage": {
                "20s": "2.4 mcg daily",
                "30s": "2.4 mcg daily",
                "40s": "2.4 mcg daily",
                "50s": "2.4 mcg daily",
                "60s": "2.4-1000 mcg daily",
                "70plus": "2.4-1000 mcg daily (higher doses for absorption issues)"
            },
            "contraindications": [],
            "interactions": ["metformin", "acid_reducers", "colchicine"],
            "sources": ["https://ods.od.nih.gov/factsheets/VitaminB12-HealthProfessional/"]
        },
        "vitamin_c": {
            "name": "Vitamin C",
            "benefits": "Immune support, antioxidant, collagen production, iron absorption",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["immune_support", "skin_health", "iron_deficiency", "longevity", "wound_healing"]
            },
            "dosage": {
                "20s": "75-90 mg daily",
                "30s": "75-90 mg daily",
                "40s": "75-90 mg daily",
                "50s": "75-90 mg daily",
                "60s": "75-90 mg daily",
                "70plus": "75-90 mg daily (up to 500-1000 mg for immune support)"
            },
            "contraindications": ["history_of_kidney_stones", "hemochromatosis"],
            "interactions": ["blood_thinners", "statins", "chemotherapy", "estrogen"],
            "sources": ["https://ods.od.nih.gov/factsheets/VitaminC-HealthProfessional/"]
        },
        "vitamin_d": {
            "name": "Vitamin D",
            "benefits": "Bone health, immune function, mood regulation",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["bone_health", "immune_support", "depression", "longevity", "muscle_function"]
            },
            "dosage": {
                "20s": "1000-2000 IU daily",
                "30s": "1000-2000 IU daily",
                "40s": "1000-2000 IU daily",
                "50s": "1000-4000 IU daily",
                "60s": "1000-4000 IU daily",
                "70plus": "2000-4000 IU daily"
            },
            "contraindications": ["hypercalcemia", "kidney_disease"],
            "interactions": ["steroids", "weight_loss_drugs", "cholesterol_medication", "seizure_medications"],
            "sources": ["https://ods.od.nih.gov/factsheets/VitaminD-HealthProfessional/"]
        },
        "vitamin_e": {
            "name": "Vitamin E",
            "benefits": "Antioxidant protection, skin health, immune function",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["skin_health", "heart_health", "longevity", "cognitive_function"]
            },
            "dosage": {
                "20s": "15 mg (22.5 IU) daily",
                "30s": "15 mg (22.5 IU) daily",
                "40s": "15 mg (22.5 IU) daily",
                "50s": "15 mg (22.5 IU) daily",
                "60s": "15 mg (22.5 IU) daily",
                "70plus": "15 mg (22.5 IU) daily"
            },
            "contraindications": ["vitamin_k_deficiency", "bleeding_disorders"],
            "interactions": ["blood_thinners", "certain_chemotherapy_drugs"],
            "sources": ["https://ods.od.nih.gov/factsheets/VitaminE-HealthProfessional/"]
        },
        "vitamin_k": {
            "name": "Vitamin K",
            "benefits": "Blood clotting, bone health, cardiovascular health, calcium regulation",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["bone_health", "heart_health", "osteoporosis_risk", "longevity"]
            },
            "dosage": {
                "20s": "90-120 mcg daily",
                "30s": "90-120 mcg daily",
                "40s": "90-120 mcg daily",
                "50s": "90-180 mcg daily",
                "60s": "90-180 mcg daily",
                "70plus": "90-180 mcg daily"
            },
            "contraindications": ["taking_warfarin"],
            "interactions": ["blood_thinners", "certain_antibiotics"],
            "sources": ["https://ods.od.nih.gov/factsheets/VitaminK-HealthProfessional/"]
        },
        
        # Essential Minerals
        "calcium": {
            "name": "Calcium",
            "benefits": "Bone health, muscle function, nerve transmission",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["bone_health", "osteoporosis_risk", "muscle_function"]
            },
            "dosage": {
                "20s": "1000 mg daily",
                "30s": "1000 mg daily",
                "40s": "1000 mg daily",
                "50s": "1200 mg daily",
                "60s": "1200 mg daily",
                "70plus": "1200 mg daily"
            },
            "contraindications": ["hypercalcemia", "kidney_stones"],
            "interactions": ["iron_supplements", "thyroid_medication", "certain_antibiotics", "zinc", "magnesium"],
            "sources": ["https://ods.od.nih.gov/factsheets/Calcium-HealthProfessional/"]
        },
        "magnesium": {
            "name": "Magnesium",
            "benefits": "Muscle function, nerve function, energy production, sleep quality",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["muscle_cramps", "sleep_issues", "stress", "heart_health", "longevity", "bone_health"]
            },
            "dosage": {
                "20s": "310-400 mg daily",
                "30s": "310-420 mg daily",
                "40s": "320-420 mg daily",
                "50s": "320-420 mg daily",
                "60s": "320-420 mg daily",
                "70plus": "320-420 mg daily"
            },
            "contraindications": ["kidney_failure", "myasthenia_gravis"],
            "interactions": ["antibiotics", "diuretics", "heart_medication", "bisphosphonates"],
            "sources": ["https://ods.od.nih.gov/factsheets/Magnesium-HealthProfessional/"]
        },
        "potassium": {
            "name": "Potassium",
            "benefits": "Blood pressure regulation, muscle function, nerve signaling, fluid balance",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["heart_health", "blood_pressure", "muscle_cramps", "exercise_recovery"]
            },
            "dosage": {
                "20s": "2500-3400 mg daily (from food and supplements)",
                "30s": "2500-3400 mg daily (from food and supplements)",
                "40s": "2500-3400 mg daily (from food and supplements)",
                "50s": "2500-3400 mg daily (from food and supplements)",
                "60s": "2500-3400 mg daily (from food and supplements)",
                "70plus": "2500-3400 mg daily (from food and supplements)"
            },
            "contraindications": ["kidney_disease", "taking_potassium_sparing_diuretics"],
            "interactions": ["ACE_inhibitors", "potassium_sparing_diuretics", "blood_pressure_medications"],
            "sources": ["https://ods.od.nih.gov/factsheets/Potassium-HealthProfessional/"]
        },
        "zinc": {
            "name": "Zinc",
            "benefits": "Immune function, wound healing, DNA synthesis, taste and smell",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["immune_support", "skin_health", "reproductive_health", "wound_healing"]
            },
            "dosage": {
                "20s": "8-11 mg daily",
                "30s": "8-11 mg daily",
                "40s": "8-11 mg daily",
                "50s": "8-11 mg daily",
                "60s": "8-11 mg daily",
                "70plus": "8-11 mg daily"
            },
            "contraindications": ["excessive_supplementation"],
            "interactions": ["antibiotics", "penicillamine", "copper_supplements", "iron_supplements"],
            "sources": ["https://ods.od.nih.gov/factsheets/Zinc-HealthProfessional/"]
        },
        "iron": {
            "name": "Iron",
            "benefits": "Red blood cell formation, oxygen transport, energy metabolism",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s"],
                "genders": ["female", "prefer_not_to_say"],  # More common for females but can apply to anyone
                "health_concerns": ["anemia", "fatigue", "heavy_periods", "vegetarian_vegan"]
            },
            "dosage": {
                "20s": "18 mg daily (menstruating females), 8 mg daily (others)",
                "30s": "18 mg daily (menstruating females), 8 mg daily (others)",
                "40s": "18 mg daily (menstruating females), 8 mg daily (others)",
                "50s": "8-18 mg daily (depends on menopause status)",
                "60s": "8 mg daily",
                "70plus": "8 mg daily"
            },
            "contraindications": ["hemochromatosis", "thalassemia"],
            "interactions": ["calcium_supplements", "antacids", "certain_antibiotics", "vitamin_e"],
            "sources": ["https://ods.od.nih.gov/factsheets/Iron-HealthProfessional/"]
        },
        "selenium": {
            "name": "Selenium",
            "benefits": "Antioxidant protection, thyroid function, immune support",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["thyroid_health", "immune_support", "antioxidant_support", "heart_health"]
            },
            "dosage": {
                "20s": "55 mcg daily",
                "30s": "55 mcg daily",
                "40s": "55 mcg daily",
                "50s": "55 mcg daily",
                "60s": "55 mcg daily",
                "70plus": "55 mcg daily"
            },
            "contraindications": ["excess_can_be_toxic"],
            "interactions": ["statins", "niacin"],
            "sources": ["https://ods.od.nih.gov/factsheets/Selenium-HealthProfessional/"]
        },
        "iodine": {
            "name": "Iodine",
            "benefits": "Thyroid function, metabolic regulation, cognitive development",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["thyroid_health", "energy_levels", "cognitive_function"]
            },
            "dosage": {
                "20s": "150 mcg daily",
                "30s": "150 mcg daily",
                "40s": "150 mcg daily",
                "50s": "150 mcg daily",
                "60s": "150 mcg daily",
                "70plus": "150 mcg daily"
            },
            "contraindications": ["hashimotos_thyroiditis", "graves_disease"],
            "interactions": ["thyroid_medications", "lithium"],
            "sources": ["https://ods.od.nih.gov/factsheets/Iodine-HealthProfessional/"]
        },
        "copper": {
            "name": "Copper",
            "benefits": "Iron metabolism, connective tissue formation, nerve function, antioxidant activity",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["joint_health", "cardiovascular_health", "hair_pigmentation", "energy_metabolism"]
            },
            "dosage": {
                "20s": "900 mcg daily",
                "30s": "900 mcg daily",
                "40s": "900 mcg daily",
                "50s": "900 mcg daily",
                "60s": "900 mcg daily",
                "70plus": "900 mcg daily"
            },
            "contraindications": ["wilson_disease"],
            "interactions": ["zinc_supplements", "vitamin_c_high_doses"],
            "sources": ["https://ods.od.nih.gov/factsheets/Copper-HealthProfessional/"]
        },
        "manganese": {
            "name": "Manganese",
            "benefits": "Enzyme function, bone formation, blood clotting, inflammation reduction",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["bone_health", "metabolism", "joint_health", "blood_sugar_management"]
            },
            "dosage": {
                "20s": "1.8-2.3 mg daily",
                "30s": "1.8-2.3 mg daily",
                "40s": "1.8-2.3 mg daily",
                "50s": "1.8-2.3 mg daily",
                "60s": "1.8-2.3 mg daily",
                "70plus": "1.8-2.3 mg daily"
            },
            "contraindications": ["liver_disease", "iron_deficiency_anemia"],
            "interactions": ["certain_antibiotics", "antacids"],
            "sources": ["https://ods.od.nih.gov/factsheets/Manganese-HealthProfessional/"]
        },
        "chromium": {
            "name": "Chromium",
            "benefits": "Blood sugar regulation, macronutrient metabolism, insulin sensitivity",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["blood_sugar_management", "weight_management", "energy_metabolism"]
            },
            "dosage": {
                "20s": "25-35 mcg daily",
                "30s": "25-35 mcg daily",
                "40s": "25-35 mcg daily",
                "50s": "25-35 mcg daily",
                "60s": "25-35 mcg daily",
                "70plus": "25-35 mcg daily"
            },
            "contraindications": ["kidney_disease", "liver_disease"],
            "interactions": ["insulin", "other_diabetes_medications", "NSAIDs"],
            "sources": ["https://ods.od.nih.gov/factsheets/Chromium-HealthProfessional/"]
        },
        "molybdenum": {
            "name": "Molybdenum",
            "benefits": "Enzyme function, detoxification, sulfite metabolism",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["detoxification_support", "sulfite_sensitivity", "liver_health"]
            },
            "dosage": {
                "20s": "45 mcg daily",
                "30s": "45 mcg daily",
                "40s": "45 mcg daily",
                "50s": "45 mcg daily",
                "60s": "45 mcg daily",
                "70plus": "45 mcg daily"
            },
            "contraindications": [],
            "interactions": ["copper_absorption"],
            "sources": ["https://ods.od.nih.gov/factsheets/Molybdenum-HealthProfessional/"]
        },
        
        # Fatty Acids & Lipids
        "omega_3": {
            "name": "Omega-3 Fatty Acids",
            "benefits": "Heart health, brain function, anti-inflammatory, joint support",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["heart_health", "joint_pain", "cognitive_function", "depression", "longevity", "inflammation"]
            },
            "dosage": {
                "20s": "1000-2000 mg daily",
                "30s": "1000-2000 mg daily",
                "40s": "1000-3000 mg daily",
                "50s": "1000-3000 mg daily",
                "60s": "1000-3000 mg daily",
                "70plus": "1000-3000 mg daily"
            },
            "contraindications": ["bleeding_disorders"],
            "interactions": ["blood_thinners", "high_blood_pressure_medication"],
            "sources": ["https://ods.od.nih.gov/factsheets/Omega3FattyAcids-HealthProfessional/"]
        },
        "omega_6": {
            "name": "Omega-6 (GLA)",
            "benefits": "Skin health, hormonal balance, inflammation regulation",
            "recommended_for": {
                "age_groups": ["20s", "30s", "40s", "50s", "60s", "70plus"],
                "genders": ["male", "female", "prefer_not_to_say"],
                "health_concerns": ["skin_health", "pms_symptoms", "hormone_balance", "inflammation"]
            },
            "dosage": {
                "20s": "500-1000 mg daily",
                "30s": "500-1000 mg daily",
                "40s": "500-1000 mg daily",
                "50s": "500-1000 mg daily",
                "60s": "500-1000 mg daily",
                "70plus": "500-1000
